<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
  />
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>直播2</title>
  <link rel="stylesheet" href="https://g.alicdn.com/de/prismplayer/2.5.1/skins/default/aliplayer-min.css" />
  <script type="text/javascript" src="https://g.alicdn.com/de/prismplayer/2.5.1/aliplayer-min.js"></script>
  <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
  <link rel="stylesheet" href="./css/common.css" />
  <link rel="stylesheet" href="./css/index.css" />
  <style>
    video {
      /*object-fit: contain !important;*/
    }
  </style>
  <script>
    (function () {
      document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';
      // document.addEventListener('visibilitychange', () => {
      //   if (document.visibilityState == 'hidden') {
      //     wx.closeWindow()
      //   }
      // });
    })();
  </script>
</head>

<body ontouchstart>
<div>
    <div class="prism-player" id="J_prismPlayer"></div>
</div>
<div></div>
</body>
<script>
  var playerData = null;
  var player = new Aliplayer({
    id: "J_prismPlayer",
    autoplay: false,
    isLive: true,
    playsinline: true,
    width: "100%",
    height: "4.24rem",
    controlBarVisibility: "always",
    useH5Prism: true,
    useFlashPrism: false,
    source: "http://player.alicdn.com/video/aliyunmedia.mp4",
    //cover: "https://cdnoss.youkouyang.com/cover.png",
    x5_type: 'h5',
    x5_fullscreen: true, //全屏播放
    x5_orientation: 'landscape',
    skinLayout: [{
        "name": "bigPlayButton",
        "align": "cc"
      },
      {
        "name": "controlBar",
        "align": "blabs",
        "x": 0,
        "y": 0,
        "children": [{
            "name": "streamButton",
            "align": "tr",
            "x": 20,
            "y": 23
          },
          {
            "name": "fullScreenButton",
            "align": "tr",
            "x": 10,
            "y": 10
          }
        ]
      },
      {
        "name": "fullControlBar",
        "align": "tlabs",
        "x": 0,
        "y": 0,
        "children": [{
          "name": "fullZoom",
          "align": "cc"
        }]
      }
    ]
  }, function (player) {
    console.log(player)
    //controlVideo (player)
    // player.isFullScreen = true;
    //var setLayout = function () {
    //设置播放器容器的高度
    // var height; //根据实际情况设置高度
    //player.el().style.width = window.innerWidth + "px";
    //player.el().style.height = window.innerHeight + "px";
    //}
    //window.onresize = function () {
    //setLayout();
    //}
    // player.on("requestFullScreen", function () {
    //setLayout();
  });
  // window.onresize = function () {
  //   video.style.width = window.innerWidth + "px";
  //   video.style.height = window.innerHeight + "px";
  //   console.log(window.innerWidth)
  //   console.log(window.innerHeight)
  //   console.log(video.style.width)
  //   console.log(video.style.height)
  // }
  //});
  function controlVideo (player) {
     player.tag.addEventListener("x5videoexitfullscreen", function () {
      //wx && wx.closeWindow();
      window.onresize = function () {
        player._el.style.overflow = 'hidden';
        player._el.style.width = '100%';
        player._el.style.height = '4.24rem';
        player.tag.style.width = '100%';
        player.tag.style.height = '4.24rem';
        player.tag.style.objectFit = 'contain';
      }
    });
    
    player.tag.addEventListener("x5videoenterfullscreen", function () {
      window.onresize = function () {
        player.tag.setAttribute("x5_type", "h5");
        player.tag.setAttribute("x5_fullscreen", "true");
        player.tag.setAttribute("x5_video_position", "top");
        player._el.style.overflow = 'auto';
        player._el.width = '100%';
        player._el.style.height = window.screen.width + 'px';
        player.tag.style.width = '100%';
        player.tag.style.height = window.screen.width + 'px';
        player.tag.style.objectFit = 'contain';
      }
    })
   
  }
  
  
</script>

</html>
