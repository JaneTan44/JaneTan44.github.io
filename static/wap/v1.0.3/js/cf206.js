webpackJsonp([61],{"8FeB":function(e,t,i){"use strict";var o=i("G2Gc"),n=i("1DHf"),r=i("rHil"),a=i("rLAy");t.a={components:{Cell:n.a,Group:r.a,Toast:a.a},data:function(){return{back:i("xniO"),orderinfo:"",nameimgs:"",names:"",price:"",showContent:!1,showyuer:!1,tip:0,balance:0,user:"",coupon_id:"",quemoney:"",show:!0,handshow:!1,name:"确认订单",borderbg:!1,bijiazhi:""}},mounted:function(){this.getOrderInfo(),this.coupon_id=this.$route.query.cid},methods:{getOrderInfo:function(){var e=this;o.a.Http({methods:"get",url:o.a.config.ApiConfig.domain+"api/v1/app_new_read/"+this.$route.query.id,formData:{},loading:!0,header:o.a.header({token:this.$cookie.get("token")}),successHandle:function(t){if("success"===t.status)if(console.log(t,t.data.purchaserecord.purchase_info.thematic_id,void 0===t.data.purchaserecord.purchase_info.thematic_id),e.orderinfo=t.data,void 0===t.data.purchaserecord.purchase_info.thematic_id?(e.nameimgs=t.data.purchaserecord.purchase_info.cover_photo_all,e.names=t.data.purchaserecord.purchase_info.course_name):(e.nameimgs=t.data.purchaserecord.purchase_info.cover_all,e.names=t.data.purchaserecord.purchase_info.label_name),e.bijiazhi=t.data.gold,e.price=t.data.purchaserecord.price,0===Number(e.$route.query.preferential)||100*t.data.gold>100*t.data.purchaserecord.price)console.log("st"),e.showContent=!0,e.showyuer=!1,e.tip="-￥"+t.data.purchaserecord.price,e.quemoney="￥0.00";else if(e.$route.query.hasOwnProperty("preferential")){console.log("preferential");var i=100*t.data.gold,o=100*t.data.purchaserecord.price,n=Number(e.$route.query.preferential);0===Number(e.$route.query.preferential)?e.tip="-￥"+t.data.purchaserecord.price:e.tip="-￥"+(e.$route.query.preferential/100).toFixed(2);var r=n/100;o>=n+i?(console.log("preferential + _gold"),e.showContent=!1,e.showyuer=!0,e.quemoney="￥"+(o/100-r-i/100).toFixed(2)):(console.log("preferential + _gold else"),e.showContent=!0,e.showyuer=!1,e.quemoney=(o/100-r).toFixed(2),e.quemoney="￥"+e.quemoney)}else{console.log("eles"),e.tip="使用奖学金",e.showContent=!1,e.showyuer=!0;var a=100*t.data.gold;e.quemoney=(100*t.data.purchaserecord.price-a)/100,e.quemoney="￥"+e.quemoney.toFixed(2)}}})},payment:function(){var e=this;this.$route.query.cid?(this.coupon_id=this.$route.query.cid,o.a.Http({methods:"post",url:o.a.config.ApiConfig.domain+"api/v1/app_new_order",formData:{order_id:this.orderinfo.purchaserecord.order_id,coupon_id:this.coupon_id},loading:!0,header:o.a.header({token:this.$cookie.get("token")}),successHandle:function(t){e.$vux.toast.text("支付成功","bottom"),setTimeout(function(){var t=JSON.parse(o.a.aesDecrypt(e.$route.query.args)),i=JSON.parse(o.a.aesDecrypt(e.$route.query.q));e.$router.push({name:e.$route.query.m,params:t,query:i})},1500)},errorHandle:function(e){console.log(e)}})):(this.coupon_id="",o.a.Http({methods:"post",url:o.a.config.ApiConfig.domain+"api/v1/app_new_order",formData:{order_id:this.orderinfo.purchaserecord.order_id,coupon_id:this.coupon_id},loading:!0,header:o.a.header({token:this.$cookie.get("token")}),successHandle:function(t){e.$vux.toast.text("支付成功","bottom"),setTimeout(function(){var t=JSON.parse(o.a.aesDecrypt(e.$route.params)),i=JSON.parse(o.a.aesDecrypt(e.$route.query));e.$router.push({name:e.$route.query.m,params:t,query:i})},1500)},errorHandle:function(e){console.log(e)}}))},gotocoupon:function(){this.$cookie.set("route",JSON.stringify(this.$route.query),{path:"/",expires:"7D"}),this.$router.push({name:"couponList",query:{m:this.$route.name,price:this.price,id:this.$route.query.id,query:this.$route.query}})},gotorecharge:function(){this.$router.push({name:"mywallet",query:{id:0}})},gotoback:function(){var e=JSON.parse(window.localStorage.getItem("orderinfo")),t=e.purchaserecord.purchase_info.id;this.$router.push({path:"/course/playdetail/"+t})}}}},CP5O:function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,'\n._1RFPa9wqzb2GuvfkzU_0{width:100%;height:100%;position:fixed;background:#f0f0f0\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2chQ6TGTbopyIvkRrY_0{height:11.733vw;line-height:11.733vw;background:#fff;position:relative;text-align:center;content:"viewport-units-buggyfill; height: 11.733vw; line-height: 11.733vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2chQ6TGTbopyIvkRrY_0 ._3IliGATJHXeiqfJ7pb_0{width:2.8vw;height:4.8vw;position:absolute;top:3.467vw;left:3.867vw;content:"viewport-units-buggyfill; width: 2.8vw; height: 4.8vw; top: 3.467vw; left: 3.867vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2chQ6TGTbopyIvkRrY_0 ._3IliGATJHXeiqfJ7pb_0 img{z-index:99;width:100%;height:100%;vertical-align:top;display:bolck\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2chQ6TGTbopyIvkRrY_0 :nth-child(2){font-size:4.8vw;font-family:PingFangSC-Regular;color:#333;content:"viewport-units-buggyfill; font-size: 4.8vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0{position:relative;width:100%;min-height:320vw;background:#f0f0f0;content:"viewport-units-buggyfill; min-height: 320vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 div,._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 p{font-size:3.733vw;content:"viewport-units-buggyfill; font-size: 3.733vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._3XHfVrnKX50ex1eAkW_0{display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex;padding:4vw;background:#fff;content:"viewport-units-buggyfill; padding: 4vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._3XHfVrnKX50ex1eAkW_0 ._377WZUELj6O0t9ImwN_0{width:25.067vw;height:16.533vw;display:block;z-index:99;content:"viewport-units-buggyfill; width: 25.067vw; height: 16.533vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._3XHfVrnKX50ex1eAkW_0 p{font-size:3.733vw;color:#333;content:"viewport-units-buggyfill; font-size: 3.733vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._3XHfVrnKX50ex1eAkW_0 span{font-size:3.2vw;color:#666;position:absolute;bottom:0;left:0;content:"viewport-units-buggyfill; font-size: 3.2vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._3XHfVrnKX50ex1eAkW_0 ._3eUrEGrHTaxsdSQ3rF_0{position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:2.667vw;content:"viewport-units-buggyfill; margin-left: 2.667vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._2tElbZSS1t8vkM93cr_0{position:fixed;bottom:0;left:0;right:0;display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._2tElbZSS1t8vkM93cr_0>span{background:#476eff;height:13.333vw;line-height:13.333vw;width:20%;color:#fff;text-align:center;content:"viewport-units-buggyfill; height: 13.333vw; line-height: 13.333vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._2tElbZSS1t8vkM93cr_0 ._3eUrEGrHTaxsdSQ3rF_0{width:calc(80% - 4vw);height:13.333vw;line-height:13.333vw;padding-left:4vw;background:#fff;-webkit-box-flex:1;-ms-flex:1;flex:1;content:"viewport-units-buggyfill; width: calc(80% - 4vw); height: 13.333vw; line-height: 13.333vw; padding-left: 4vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._2tElbZSS1t8vkM93cr_0 ._3eUrEGrHTaxsdSQ3rF_0 span{color:#fc651e\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._2M3JX2-M7i1BaaIcGk_0{position:fixed;bottom:0;left:0;right:0;text-align:center\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._2M3JX2-M7i1BaaIcGk_0 p{color:#333;margin-bottom:2.667vw;content:"viewport-units-buggyfill; margin-bottom: 2.667vw"\n}\n._1RFPa9wqzb2GuvfkzU_0 ._2F0VlNeMRexYSFNLtT_0 ._2M3JX2-M7i1BaaIcGk_0 span{display:block;height:13.333vw;line-height:13.333vw;font-size:4.267vw;color:#fff;background:#fc651e;content:"viewport-units-buggyfill; height: 13.333vw; line-height: 13.333vw; font-size: 4.267vw"\n}',""]),t.locals={user:"_1RFPa9wqzb2GuvfkzU_0",header:"_2chQ6TGTbopyIvkRrY_0",headimg:"_3IliGATJHXeiqfJ7pb_0",comfirmOrder:"_2F0VlNeMRexYSFNLtT_0",flex_box:"_3XHfVrnKX50ex1eAkW_0",flexBox:"_3XHfVrnKX50ex1eAkW_0",imgs:"_377WZUELj6O0t9ImwN_0",flex_item:"_3eUrEGrHTaxsdSQ3rF_0",flexItem:"_3eUrEGrHTaxsdSQ3rF_0",btn_flexbox:"_2tElbZSS1t8vkM93cr_0",btnFlexbox:"_2tElbZSS1t8vkM93cr_0",btn_box:"_2M3JX2-M7i1BaaIcGk_0",btnBox:"_2M3JX2-M7i1BaaIcGk_0"}},E8aU:function(e,t,i){var o=i("PTzO");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i("rjj0")("9157ec82",o,!0,{})},PTzO:function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,'\n.comfirmOrder .weui-cells{margin-top:2.667vw;content:"viewport-units-buggyfill; margin-top: 2.667vw"\n}\n.weui-cells:after,.weui-cells:before{border-color:transparent!important\n}\n.weui-cell__ft :after{width:2.667vw!important;content:"viewport-units-buggyfill; width: 2.667vw"\n}\n.red .weui-cell__ft{color:#fc651e\n}\n.comfirmOrder .weui-cell{padding:0 4vw;height:13.333vw;line-height:13.333vw;content:"viewport-units-buggyfill; padding: 0 4vw; height: 13.333vw; line-height: 13.333vw"\n}\n.animate{height:26.4vw!important;-webkit-transition-timing-function:cubic-bezier(.5,0,1,0);transition-timing-function:cubic-bezier(.5,0,1,0);-webkit-transition-delay:0s;transition-delay:0s;content:"viewport-units-buggyfill; height: 26.4vw"\n}\n.sub-item{color:#888\n}\np.slide{padding:0 5.333vw;overflow:hidden;max-height:0;-webkit-transition:max-height .5s cubic-bezier(0,1,0,1) -.1s;transition:max-height .5s cubic-bezier(0,1,0,1) -.1s;content:"viewport-units-buggyfill; padding: 0 5.333vw"\n}',""])},atzV:function(e,t,i){"use strict";var o=i("G2Gc"),n=i("1DHf"),r=i("rHil"),a=i("rLAy");n.a,r.a,a.a},cotP:function(e,t,i){"use strict";function o(e){this.css=i("q1nN"),i("E8aU")}Object.defineProperty(t,"__esModule",{value:!0});var n=(i("atzV"),i("8FeB")),r=i("l3tL"),a=i("VU/8"),s=o,c=a(n.a,r.a,!1,s,null,null);t.default=c.exports},l3tL:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.css.user},[i("headholder",{attrs:{title:e.name,arrows:e.show,handshow:e.handshow,borderbg:e.borderbg},on:{backto:e.gotoback}}),e._v(" "),e.orderinfo?i("div",{staticClass:"comfirmOrder",class:e.css.comfirmOrder},[i("div",{class:e.css.flex_box},[i("img",{class:e.css.imgs,attrs:{src:e.nameimgs}}),e._v(" "),i("div",{class:e.css.flex_item},[i("p",[e._v(e._s(e.names))]),e._v(" "),i("span",[e._v("￥"+e._s(e.orderinfo.purchaserecord.price))])])]),e._v(" "),i("div",{on:{click:function(t){e.gotocoupon()}}},[i("group",[i("cell",{staticClass:"jin",attrs:{title:"奖学金","is-link":""}},[e._v(e._s(e.tip))])],1)],1),e._v(" "),i("group",[i("cell",{staticClass:"red",attrs:{title:"余额"}},[e._v("￥"+e._s(e.orderinfo.gold))])],1),e._v(" "),i("div",{class:e.css.tip}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showyuer,expression:"showyuer"}],class:e.css.btn_box},[i("p",[e._v("余额不足，还差"+e._s(e.quemoney))]),e._v(" "),i("span",{on:{click:function(t){e.gotorecharge()}}},[e._v("去充值")])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showContent,expression:"showContent"}],class:e.css.btn_flexbox},[i("div",{class:e.css.flex_item},[e._v("\n        应付金额："),i("span",[e._v(e._s(e.quemoney?e.quemoney:"0.00"))])]),e._v(" "),i("span",{on:{click:function(t){e.payment()}}},[e._v("立即支付")])])],1):e._e()],1)},n=[],r={render:o,staticRenderFns:n};t.a=r},q1nN:function(e,t,i){var o=i("CP5O");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i("rjj0")("6a9dd1ee",o,!0,{})}});